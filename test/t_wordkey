#
# Part of the ht://Dig package   <http://www.htdig.org/>
# Copyright (c) 1999 The ht://Dig Group
# For copyright details, see the file COPYING in your distribution
# or the GNU Public License version 2 or later
# <http://www.gnu.org/copyleft/gpl.html>
#
# $Id: t_wordkey,v 1.2 1999/09/27 13:55:48 loic Exp $
#

. test_functions

verbose=$1

exercise() {
	    echo "Exercising $1";
	    ( cd ../htcommon
	      perl word_builder.pl $1
	      if $MAKE > /tmp/t_word$$ 2>&1
	      then
		rm /tmp/t_word$$
	      else
		cat /tmp/t_word$$
		exit 1
	      fi
	    )
	    if $MAKE > /tmp/t_word$$ 2>&1
	    then
		rm /tmp/t_word$$
	    else
		cat /tmp/t_word$$
		exit 1
	    fi
	    ./word -w $1 -k $verbose || exit 1
}

for i in ../test/word.try1 ../test/word.try2 ../test/word.try3 ../test/word.try4 ../test/word.try5 word.desc
do
    exercise $i
done
